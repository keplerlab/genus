{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/config.js","webpack://exports/./src/fileSystem.js","webpack://exports/./src/htmlCSSGenerator.js","webpack://exports/./src/main.js","webpack://exports/./src/utils.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["CONFIG","sketch","exportFormat","use_id_for_asset_name","embedSvg","imageScalesString","imageScales","cssFileName","htmlFileName","imageFolder","utils_obj","utils","fileSystem","context","filename","text","string","NSString","stringWithFormat","writeToFile_atomically_encoding_error","NSUTF8StringEncoding","nil","document","fileURL","path","replace","fileManager","NSFileManager","defaultManager","removeItemAtPath_error","name","createDirectoryAtPath_withIntermediateDirectories_attributes_error_","srcName","dstName","exists","fileExistsAtPath","moveItemAtPath_toPath_error","errorMessage","alertError","default_asset_export_format","use_id_for_name","embedSvgConf","fileSystem_obj","Exporter","doc","require","getSelectedDocument","selection","selectedLayers","selectedArtboards","getSelectedArtboards","exportFolder","getSelection","forEachLayer","group","func","layers","i","length","layerMarkedForExport","layer","markedForExport","undefined","formats","exportFormats","artboardSet","Set","artboards","artboard","type","getParentArtboard","has","id","add","push","exportedLayers","generateHTML","childrenHtml","generateHTMLForChildren","html","generateHTMLHeader","generateHTMLFooter","generateCSS","css","generateBoilerPlateCSS","generateCSSForArtboard","forEach","generateCSSForLayer","Math","round","frame","width","cleanString","checkIfLayerExportedAsImage","condition1","condition2","isMaskLayerInGroup","condition3","tabs","sketchObject","isVisible","layerName","generateLayerName","openTag","closeTag","embedCode","preprocessingTextLayer","generateHTMLTextForMultiText","console","log","attrStr","attributedStringValue","string_text","limitRange","NSMakeRange","effectiveRange","MOPointer","alloc","init","fonts","font_colors","stringStartIndices","stringLengths","effectiveRange2","attribute_atIndex_longestEffectiveRange_inRange","NSFontAttributeName","location","attributes","attributesAtIndex_longestEffectiveRange_inRange","MSAttributedStringColorAttribute","hexValue","value","NSMaxRange","text_span_array","text_span","Object","font","font_color","weightIndex","NSFontManager","sharedFontManager","weightOfFont_","fontName","fontFamilyName","familyName","fontSize","pointSize","weight","appKitWeightToCSSWeight","sub_string","substr","spanArray","tspan","spanLength","exportImages","exportPath","exportImageForLayer","imageFormat","options","scales","trimmed","export","index","scale","appendName","nameForScale","renameFile","str","spanElement","spanText","getBorderCss","style","borderCss","border_applied_counter","borders","k","enabled","getBorderString","border","borderCssString","thickness","color","fillType","getShadowCss","shadowCss","shadow_applied_counter","shadows","getShadowString","shadow","shadowCssString","x","y","blur","nsImageSize","output","buffer","nsImageForBuffer","toNSData","nsImage","NSImage","initWithData","size","image_full_path","height","generateCSSForTextLayer","fontFamily","fontStretch","fontWeight","fontVariant","fontStyle","textTransform","kerning","verticalAlignment","fills","textColor","lineHeight","opacity","alignment","spanCss","hasBackgroundColor","background","run","folder","deleteFile","createFolder","htmlPath","saveTextToFile","cssPath","exportFullHTML","UI","message","exporter","errorMsg","errorMsgTitle","currentDirectoryPath","getCurrentFilePath","alertMessage","alert","e","msg","toLowerCase","includes","cmd","task","NSTask","setLaunchPath","setArguments","launch","title","runCommand","app","NSApplication","sharedApplication","displayDialog_withTitle","r","red","g","green","b","blue","toString","toUpperCase","layerExportName","maskPresent","maskLayers","isMasked"],"mappings":"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","file":"__main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","const CONFIG = {\n    sketch: {\n        exportFormat: \"png\", // export format for teh images (svg or png)\n        use_id_for_asset_name: true, // Will use sketch layer id for asset name\n        embedSvg: false,\n        imageScalesString: '1, 2, 3',\n        imageScales: [1, 2, 3],\n        cssFileName: \"styles.css\",\n        htmlFileName: \"index.html\",\n        imageFolder: \"images/\"\n    }\n}\n\nexport default CONFIG;","import sketch from \"sketch\";\nimport utils from './utils';\nvar utils_obj = new utils();\n\n/**\n *File systems class implementing file/dir operations like save, renaming, creating directories etc.\n *\n * @class fileSystem\n */\nclass fileSystem \n{\n\n    constructor(context) \n    {\n        this.context = context;\n    }\n\n    /**\n     * Method to save text to a file.\n     *\n     * @param {*} filename\n     * @param {*} text\n     * @memberof fileSystem\n     */\n    saveTextToFile(filename, text) \n    {\n        /* NSString.stringWithFormat and writeToFile_atomically_encoding_error \n        * is not part of official sketch javascript api \n        */\n        const string = NSString.stringWithFormat(\"%@\", text);\n        string.writeToFile_atomically_encoding_error(filename, true, NSUTF8StringEncoding, nil);\n    }\n\n    /**\n     * Returns file path for the sketch context.\n     *\n     * @returns path for sketch file\n     * @memberof fileSystem\n     */\n    getCurrentFilePath() \n    {\n        return this.context.document.fileURL().path().replace(/\\.sketch$/, '')\n    }\n\n    /**\n     * Deletes the file given the path.\n     *\n     * @param {*} path\n     * @memberof fileSystem\n     */\n    deleteFile(path) \n    {\n        /* NSFileManager.defaultManager and fileManager.removeItemAtPath_error\n        * is not part of official sketch javascript api \n        */\n        var fileManager = NSFileManager.defaultManager();\n        fileManager.removeItemAtPath_error(path, nil);\n    }\n\n    /**\n     * Creates a folder given its name as argument.\n     *\n     * @param {*} name\n     * @memberof fileSystem\n     */\n    createFolder(name) \n    {\n        /* NSFileManager.defaultManager and fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_\n        * is not part of official sketch javascript api \n        */\n        var fileManager = NSFileManager.defaultManager();\n        fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_(name, true, nil, nil);\n    }\n\n    /**\n     * Rename the file given the source and destination.\n     *\n     * @param {*} srcName\n     * @param {*} dstName\n     * @memberof fileSystem\n     */\n    renameFile(srcName, dstName) \n    {\n        /* NSFileManager.defaultManager and fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_\n        * is not part of official sketch javascript api \n        */\n        var fileManager = NSFileManager.defaultManager();\n        const exists = NSFileManager.defaultManager().fileExistsAtPath(srcName);\n        if(exists)\n        {\n            fileManager.moveItemAtPath_toPath_error( srcName, dstName, nil);\n        }\n        else\n        {\n            errorMessage = \"FileNotFoundError: Error in renaming file: \" + srcName\n            utils_obj.alertError(errorMessage)\n        }\n    }\n\n}\n\nexport default fileSystem;","import sketch from \"sketch\";\nimport fileSystem from './fileSystem';\nimport utils from './utils';\nimport CONFIG from './config';\n\n// documentation: https://developer.sketchapp.com/reference/api/\n\n// Configuration parameters\nvar default_asset_export_format = CONFIG.sketch.exportFormat;\nvar use_id_for_name = CONFIG.sketch.use_id_for_asset_name;\nvar embedSvgConf = CONFIG.sketch.embedSvg;\nvar cssFileName = CONFIG.sketch.cssFileName ;\nvar htmlFileName = CONFIG.sketch.htmlFileName ;\nvar imageFolder = CONFIG.sketch.imageFolder ; \nvar imageScalesString = CONFIG.sketch.imageScalesString ;\nvar imageScales = CONFIG.sketch.imageScales ;\n\nvar utils_obj = new utils();\nvar fileSystem_obj = new fileSystem(context) ; \n/**\n * Exporter for sketch to HTML.\n *\n * @param {*} context\n */\nfunction Exporter(context) \n{\n\n    var context = context;\n\tvar doc = require('sketch/dom').getSelectedDocument()\n    var selection = doc ? doc.selectedLayers : nil;\n    var selectedArtboards = getSelectedArtboards();\n    var embedSvg = false;\n    var exportFolder = null;\n\n    this.getSelection = function() \n    {\n        return selection;\n    }\n\n    /**\n     * getter method for selected artboards.\n     *\n     * @returns {Array<Object>}\n     */\n    this.getSelectedArtboards = function()\n    {\n        return selectedArtboards;\n    }\n\n    function forEachLayer(group, func) \n    {\n        var layers = group.layers;\n        for (var i = 0; i < layers.length; i++) {\n            func(layers[i]);\n        }\n    };\n\n\n    /**\n     * Checks if layer marked for export\n     *\n     * @returns true if No of exportable formats greater that 1 else false\n     */\n    function layerMarkedForExport(layer) \n    {\n        if(layer.markedForExport != undefined )\n        {\n            return layer.markedForExport ; \n        }\n        else\n        {\n            var formats = layer.exportFormats;\n            layer.markedForExport = formats.length > 0;\n            return layer.markedForExport\n        } \n\n    }\n\n\n    /**\n     * Get the array of selected artboards in sketch file\n     *\n     * @returns {Array} list of artboards selected\n     */\n    function getSelectedArtboards() \n    {\n\n        // Using Set so that selected artboards are not repeated and unique\n        let artboardSet = new Set()\n        var artboards = [];\n        for (var i = 0; i < selection.length ; i++) \n        {\n\t\t\tvar layer = selection.layers[i];\n\t\t\tvar artboard = undefined ;\n\t\t\t// return artboard if selection is an artboard itself\n            if (layer.type == \"Artboard\") \n            {\n\t\t\t\tartboard = layer ;\n\t\t\t}\n\t\t\t// else return parent artboard of layer \n            else \n            {\n\t\t\t\tartboard = layer.getParentArtboard();\n\t\t\t}\n\t\t\t// Make sure artboard is not undefined and is unique using sets\n            if (artboard != undefined && !artboardSet.has(artboard.id)) \n            {\n                artboardSet.add(artboard.id)\n                artboards.push(artboard);\n            }\n        }\n\n        return artboards;\n    }\n\n    var exportedLayers = {};\n\n    /**\n     * Method to generate html given the artboard.\n     *\n     * @param {*} artboard\n     * @returns {String} html corresponding to artboard\n     */\n    function generateHTML(artboard) \n    {\n        // Create new array to save layers for export for each artboard\n        exportedLayers[artboard] = [];\n\n        // Get HTML & CSS for children\n        var childrenHtml = generateHTMLForChildren(artboard, \"\\t\\t\\t\");\n\n        // Generate HTML\n        var html = generateHTMLHeader(artboard);\n        html += childrenHtml;\n        html += generateHTMLFooter();\n\n        return html;\n    }\n\n    /**\n     * Method to generate CSS for the artboard.\n     *\n     * @param {*} artboard\n     * @returns {String} css for the artboard\n     */\n    function generateCSS(artboard) \n    {\n        // Generate CSS\n        var css = \"/* Generated by Genus plugin */\\n\";\n        css += \"\\n\"\n\n        css += \"/* Boiler plate CSS \\n\"\n        css += \"sk-ab is css style applied to full art board\\n\"\n        css += \"sk-asset is common css property applied to every css style generated by genus plugin \\n\"\n        css += \"*/ \\n\"\n        css += \"\\n\";\n        css += generateBoilerPlateCSS();\n        css += \"\\n\";\n\n        css += \"/* Specific to \" + artboard.name + \" */\\n\";\n        css += generateCSSForArtboard(artboard);\n        css += \"\\n\";\n\n        exportedLayers[artboard].forEach(function(layer) {\n            css += generateCSSForLayer(layer);\n        });\n\n        return css;\n    }\n\n    /**\n     * Generates the <head> html content for the artboard\n     *\n     * @param {*} artboard\n     * @returns {String} content for <head> tag\n     */\n    function generateHTMLHeader(artboard) \n    {\n\n        var html = \"<html>\\n\";\n        html += \"\\t<head>\\n\";\n        html += \"\\t\\t<link href='\" + cssFileName + \"' rel='stylesheet'>\\n\";\n        html += \"\\t\\t<meta charset=\\\"utf-8\\\"/>\\n\"\n        html += \"\\t</head>\\n\";\n        html += \"\\t<body style=\\\"margin:0px;\\\">\\n\";\n        html += \"\\t <div style=\\\"width: \" + Math.round(artboard.frame.width) + \"px; height: 100%; position:relative; margin:auto;\\\"> \\n\";\n        html += \"\\t\\t<div class='sk-ab sk-\" + utils_obj.cleanString(artboard.name) + \"'>\\n\";\n\n        return html;\n    }\n\n    /**\n     * Generates the closing tags for head, html and the div's inside the body\n     *\n     * @param {*} artboard\n     * @returns {String} html string for closing the html head, body and div tag\n     */\n    function generateHTMLFooter() \n    {\n        var html = \"\\t\\t</div>\\n\";\n        html += \"\\t</div>\\n\";\n        html += \"\\t</body>\\n\";\n        html += \"</html>\";\n\n        return html;\n    }\n\n    /**\n     * Generates the closing tags for head, html and the div's inside the body\n     *\n     * @returns {String} html string for closing the html head, body and div tag\n     */\n    function checkIfLayerExportedAsImage(layer)\n    {\n        // If layer is marked as exportable in sketch export it should be\n        // exported as an image\n        var condition1 = layerMarkedForExport(layer) \n\n        // If Layer is of type Group and that group has any element that has\n        // mask then export whole group as an image\n        var condition2 = (layer.type == \"Group\" && utils_obj.isMaskLayerInGroup(layer))\n\n        // Export any layer as an image which is not of type text or group\n        // e.g. Shape, Image, Symbols etc.\n        var condition3 = (layer.type != \"Text\" && layer.type != \"Group\")\n\n        // Export layer as an image if any of these three conditions are met \n        return  condition1 ||  condition2 || condition3\n    }\n\t /**\n     * Main recursive function for generate html for any layer\n     *\n     * @returns {String} html \n     */\n    function generateHTMLForChildren(group, tabs) \n    {\n        var html = \"\";\n\n        forEachLayer(group, function(layer) \n        {\n            if (!layer.sketchObject.isVisible()) \n            {\n                return;\n            }\n\n            layer.layerName = utils_obj.generateLayerName(layer) ;\n\t\t\t\n            var openTag = tabs + \"<div class='sk-asset sk-\" + layer.layerName + \"'>\";\n\t\t\tvar closeTag = \"</div>\\n\";\n\n            // This if condition should execute only if we want a layer to be exported as image\n            if (checkIfLayerExportedAsImage(layer)) \n            {\n                exportedLayers[layer.getParentArtboard()].push(layer);\n                var embedCode = \"\";\n                html += openTag + embedCode + closeTag;\n            }\n            // If layer is group...\n            else if (layer.type == \"Group\") \n            {\n                var childrenHtml = generateHTMLForChildren(layer, tabs + \"\\t\");\n\n                // If group is not empty, write it and its children to HTML\n                if (childrenHtml != \"\") \n                {\n                    html += openTag + \"\\n\";\n                    html += childrenHtml;\n                    html += tabs + closeTag;\n\n                    // This layer needs to be exported to HTML\n                    exportedLayers[layer.getParentArtboard()].push(layer);\n                }\n            }\n            // If layer is text export text\n            else if (layer.type == \"Text\") \n            {\n                layer = preprocessingTextLayer(layer);\n\t\t\t\thtml += openTag + generateHTMLTextForMultiText(layer) + closeTag;\n                exportedLayers[layer.getParentArtboard()].push(layer);\n            } \n            else \n            {\n                console.log(\"Unhandled layer type encountered, Skipping export of layer ...\")\n            }\n\n        });\n\n        return html;\n    }\n\n\n\t/**\n     * Reprocesses and extracts data for Multiple style text using MacOS Attributed strings \n     * for text layers \n     *\n     * @param {*} Text layer for which the html needs to be generated\n     * @param {*} tabs used for indentation of generated html text\n     * @returns layer with preprocessing done\n     */\n\tfunction preprocessingTextLayer(layer, tabs)\n\t{\n        // Following code extracts multiple text styles from text using MacOS api, Sketch api does not support\n        // Multiple text styles in a layer \n\n        // TODO : Mark all functions that are not part of sketch javascript api\n\n        /* layer.sketchObject.attributedStringValue(), NSMakeRange(0, attrStr.length()),MOPointer.alloc().init()\n        * is not part of official sketch javascript api \n        */\n\t\tconst attrStr = layer.sketchObject.attributedStringValue()\n\t\tconst string_text = attrStr.string()\n\t\tlet limitRange = NSMakeRange(0, attrStr.length())\n\t\tlet effectiveRange = MOPointer.alloc().init()\n\n\t\tconst fonts = []\n\t\tconst font_colors = []\n\t\tconst stringStartIndices = []\n\t\tconst stringLengths = []\n\n\t\tlet effectiveRange2 = MOPointer.alloc().init()\n\n        while (limitRange.length > 0) \n        {\n            // attribute_atIndex_longestEffectiveRange_inRange is not part of official sketch javascript api \n\t\t\tfonts.push(attrStr.attribute_atIndex_longestEffectiveRange_inRange(\n\t\t\t\tNSFontAttributeName,\n\t\t\t\tlimitRange.location,\n\t\t\t\teffectiveRange,\n\t\t\t\tlimitRange\n\t\t\t))\n\n\t\t\tvar attributes = attrStr.attributesAtIndex_longestEffectiveRange_inRange(\n\t\t\t\tlimitRange.location,\n\t\t\t\teffectiveRange2,\n\t\t\t\tlimitRange\n\t\t\t)\n            if (attributes != null) \n            {\n                // attributes.MSAttributedStringColorAttribute.hexValue is not part of official sketch javascript api \n\t\t\t\tfont_colors.push(attributes.MSAttributedStringColorAttribute.hexValue())\n\t\t\t}\n\n\t\t\tstringStartIndices.push(effectiveRange.value().location)\n\t\t\tstringLengths.push(effectiveRange.value().length)\n\n            // NSMakeRange, NSMaxRange is not part of official sketch javascript api \n\t\t\tlimitRange = NSMakeRange(\n\t\t\t\tNSMaxRange(effectiveRange.value()),\n\t\t\t\tNSMaxRange(limitRange) - NSMaxRange(effectiveRange.value())\n\t\t\t)\n\t\t}\n\n\n\t\tconst text_span_array = []\n        for (var i = 0; i < fonts.length; i++) \n        {\n\t\t\tvar text_span = new Object();\n\n\t\t\tvar font = fonts[i];\n\t\t\tvar font_color = font_colors[i];\n\n            /* NSFontManager.sharedFontManager().weightOfFont_ , layer.sketchObject.font()\n            * is not part of official sketch javascript api \n            */\n            let weightIndex = NSFontManager.sharedFontManager().weightOfFont_(layer.sketchObject.font());\n            var fontName = font.fontName();\n\t\t\tvar fontFamilyName = font.familyName();\n            var fontSize = font.pointSize();\n            let weight = utils_obj.appKitWeightToCSSWeight(weightIndex, fontName);\n\t\t\tvar sub_string = string_text.substr(stringStartIndices[i], stringLengths[i]);\n\t\t\tsub_string = sub_string.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n\n\t\t\ttext_span.text = sub_string\n\t\t\ttext_span.fontFamilyName = fontFamilyName\n\t\t\ttext_span.weight = weight\n\t\t\ttext_span.fontSize = fontSize\n\t\t\ttext_span.font_color = font_color\n\t\t\ttext_span_array.push(text_span)\n\t\t}\n\n\t\tlayer[\"tspan\"] = text_span_array;\n\t\tvar spanArray = layer.tspan;\n\t\tvar spanLength = text_span_array.length;\n\t\t//console.log(\"spanLength: \"+ spanLength);\n\n\t\tlayer[\"tspanObject\"] = text_span_array;\n\t\t\n\t\treturn layer ; \n\t}\n    /**\n     * Exports images for all the layers to a specified destination, calls exportImages internally\n     *\n     * @param {*} layers list of layers to be exported\n     * @param {*} exportPath the path where the images need to be exported\n     */\n    function exportImages(layers, exportPath) \n    {\n        layers.forEach(function(layer) {\n            exportImageForLayer(layer, exportPath + imageFolder, default_asset_export_format, imageScales);\n        });\n    }\n\n    /**\n     * Export images to a specified destination for a particular layer\n     *\n     * @param {*} layer layer to be exported\n     * @param {*} exportPath export path\n     * @param {*} imageFormat image format of exported images\n     * @param {*} imageScales scale of images to be exported (e.g 2x, 3x)\n     */\n    function exportImageForLayer(layer, exportPath, imageFormat, imageScales) \n    {\n        const options = {\n            scales: imageScalesString,\n            formats: default_asset_export_format\n        }\n        options['output'] = exportPath\n        options[\"use-id-for-name\"] = use_id_for_name\n        options.trimmed = false\n        sketch.export(layer, options)\n\n        for (var index in imageScales) {\n            var scale = imageScales[index];\n            if (scale > 1) {\n                var appendName = utils_obj.nameForScale(scale);\n                var srcName = exportPath + layer.id + appendName + \".\" + imageFormat;\n                var dstName = exportPath + layer.layerName + appendName + \".\" + imageFormat;\n                fileSystem_obj.renameFile(srcName, dstName);\n\n            } else {\n                var srcName = exportPath + layer.id + \".\" + imageFormat;\n                var dstName = exportPath + layer.layerName + \".\" + imageFormat;\n                fileSystem_obj.renameFile(srcName, dstName);\n\n            }\n        }\n\n    }\n\n    /**\n     * Generates html when there is multiple texts for the Sketch layer type \"Text\"\n     *\n     * @param {*} Sketch layer of type \"Text\"\n     * @returns {String} Returns collection of spans as string to be used exported in html\n     */\n    function generateHTMLTextForMultiText(layer) \n    {\n        var str = \"\";\n        var spanArray = layer.tspan;\n        var spanLength = spanArray.length;\n\t\t\n        for (var i = 0; i < spanLength; i++) \n        {\n            var openTag = '<span class=\"span' + (i + 1) + '\">';\n            var closeTag = \"</span>\";\n\n            var spanElement = spanArray[i];\n            var spanText = spanElement.text;\n            if (spanText === undefined) \n            {\n                str += openTag + \"\" + closeTag;\n            } else \n            {\n                str += openTag + spanText + closeTag;\n            }\n\n        }\n        return str;\n    }\n\n\n\n    /**\n     * Generate border css style when border style is applied in the layer\n     *\n     * @param {*} style border style property from sketch\n     * @returns {String} css for border radius\n     */\n    function getBorderCss(style) \n    {\n        var borderCss = \"\";\n        var border_applied_counter = 0;\n        if (style.borders != undefined) \n        {\n            for (var k = 0; k < style.borders.length; k++) \n            {\n                if (style.borders[k].enabled) \n                {\n                    border_applied_counter += 1;\n                    if (border_applied_counter == 1) \n                    {\n                        borderCss += \"\\tborder: \";\n\n                    } else if (border_applied_counter > 1) \n                    {\n                        borderCss += \" , \";\n                    }\n                    borderCss += getBorderString(style.borders[k]);\n\n                }\n            }\n            if (border_applied_counter > 0)\n                borderCss += \" ;\\n\";\n        }\n\n        return borderCss;\n    }\n\n\t/**\n     * Generate border string given border value\n     *\n     * @param {*} style border style property from sketch\n     * @returns {String} css for border radius\n     */\n    function getBorderString(border) \n    {\n\n        var borderCssString = \"\"\n        if (border.thickness != undefined) \n        {\n            borderCssString += border.thickness + \"px \";\n        }\n\n        if (border.color != undefined && border.fillType == \"Color\") \n        {\n            borderCssString += border.color;\n        }\n\n\n        return borderCssString;\n\n    }\n\n\n    /**\n     * Generates css when shadow style is applied in the layer\n     *\n     * @param {*} style style object for the shadow\n     * @returns {String} css for the shadow style\n     */\n    function getShadowCss(style) \n    {\n        var shadowCss = \"\";\n        var shadow_applied_counter = 0;\n        if (style.shadows != undefined) \n        {\n            for (var k = 0; k < style.shadows.length; k++) \n            {\n                if (style.shadows[k].enabled) \n                {\n                    shadow_applied_counter += 1;\n                    if (shadow_applied_counter == 1) {\n                        shadowCss += \"\\ttext-shadow: \";\n\n                    } else if (shadow_applied_counter > 1) \n                    {\n                        shadowCss += \" , \";\n                    }\n                    shadowCss += getShadowString(style.shadows[k]);\n\n                }\n            }\n            if (shadow_applied_counter > 0)\n                shadowCss += \" ;\\n\";\n        }\n\n        return shadowCss;\n    }\n\n\t/**\n\t * Generates css string for shadow property \n\t *\n\t * @param {*} shadow object\n\t * @returns {String} css for the shadow style\n\t */\n    function getShadowString(shadow) \n    {\n\n        var shadowCssString = \"\"\n        // h-shadow v-shadow blur-radius color|none|initial|inherit;\n        if (shadow.x != undefined) \n        {\n            shadowCssString += shadow.x + \"px \";\n        }\n        if (shadow.y != undefined) \n        {\n            shadowCssString += shadow.y + \"px \";\n        }\n        if (shadow.blur != undefined) \n        {\n            shadowCssString += shadow.x + \"px \";\n        }\n        if (shadow.color != undefined) \n        {\n            shadowCssString += shadow.color;\n        }\n\n        return shadowCssString;\n\n    }\n\n\n    /**\n     * Generates CSS for the layer. \n     * This gives absolute position for left and top, width and height, font styles, opacity etc.\n     *\n     * @param {*} layer layer for which the css needs to be generated\n     * @returns {String} css for the layer\n     */\n    function generateCSSForLayer(layer) \n    {\n        // Variable to store actual image size of image layer\n        var nsImageSize = undefined\n\n        var css = \".sk-asset.sk-\" + layer.layerName + \" {\\n\";\n        css += \"\\tleft: \" + Math.round(layer.frame.x) + \"px;\\n\";\n        css += \"\\ttop: \" + Math.round(layer.frame.y) + \"px;\\n\";\n\n        // Set background image for exported layer\n        if(checkIfLayerExportedAsImage(layer))\n        {\n        /* Sketch api often returns wrong width and height for an image. \n         * e.g. In case of layer has shadow or mask property, to prevent bugs due to this\n         * Width and height or any image is programmatically extracted from actual exported image using\n         * unofficial Mac api , NSImage.alloc().initWithData, buffer.toNSData() and nsImage.size() functions are not \n         * part of official sketch javascript api \n         */\n\n            const options = {\n                formats: 'png',\n                output: false\n            }\n            options.trimmed = false\n            const buffer = sketch.export(layer, options)\n            var nsImageForBuffer = buffer.toNSData()\n            let nsImage = NSImage.alloc().initWithData(nsImageForBuffer)\n            nsImageSize = nsImage.size()\n\n            \n            var image_full_path = imageFolder + layer.layerName + \".\" + default_asset_export_format;\n            css += \"\\tbackground-image: url(\\\"\" + image_full_path + \"\\\");\\n\";\n            css += \"\\twidth: \" + Math.round(nsImageSize.width) + \"px;\\n\";\n            css += \"\\theight: \" + Math.round(nsImageSize.height) + \"px;\\n\";\n\n        } \n        else \n        {\n        /* For layer type not image get width height from official sketch javascript api\n         */\n            css += \"\\twidth: \" + Math.round(layer.frame.width) + \"px;\\n\";\n            css += \"\\theight: \" + Math.round(layer.frame.height) + \"px;\\n\";\n        }\n\n        css += \"}\\n\";\n        css += \"\\n\";\n\n        /* If assets are exported at different scaled resolution, Following code will return different css properties \n        * for different resolution devices, e.g. For desktop good resolution screen image picked could be 2x instead of 1x resolution\n        */\n        if(checkIfLayerExportedAsImage(layer))\n        {\n \n            for (var index in imageScales) \n            {\n                var scale = imageScales[index];\n                if (scale > 1) \n                {\n                    var appendName = utils_obj.nameForScale(scale);\n\n                    css += \"@media only screen and (min--moz-device-pixel-ratio: \" + scale + \"),\\n\" +\n                        \"only screen and (-o-min-device-pixel-ratio: \" + scale + \"/1),\\n\" +\n                        \"only screen and (-webkit-min-device-pixel-ratio: \" + scale + \"),\\n\" +\n                        \"only screen and (min-device-pixel-ratio: \" + scale + \") {\\n\";\n\n                    css += \"\\t.sk-asset.sk-\" + layer.layerName + \" {\\n\";\n                    var image_full_path =  imageFolder + layer.layerName + appendName + \".\" + default_asset_export_format;\n                    css += \"\\t\\tbackground-image: url(\\\"\" + image_full_path + \"\\\");\\n\";\n                    css += \"\\t\\tbackground-size: \" + Math.round(nsImageSize.width) + \"px \" + Math.round(nsImageSize.height) + \"px;\\n\";\n                    css += \"\\t}\\n\";\n                    css += \"}\\n\";\n                }\n            }\n\t\t} \n        else if (layer.type == \"Text\") \n        {\n\t\t\tcss += generateCSSForTextLayer(layer)\n\t\t}\n   \treturn css;\n\t\n\t}\n\n    /**\n     * Generates CSS for the layer of type text. \n     *\n     * @param {*} Text layer for which the css needs to be generated\n     * @returns {String} css for the layer\n     */\n\tfunction generateCSSForTextLayer(layer)\n\t{\n        // For text without multitext span length should be 1 \n        var spanLength = 0;\n        if (layer.tspan != undefined) \n        {\n\t\t\tvar spanArray = layer.tspan;\n            if (spanArray.length != undefined) \n            {\n\t\t\t\tspanLength = spanArray.length;\n\t\t\t}\n        }\n\n\t\tvar css = \"\"\n\t\tcss += \".sk-asset.sk-\" + layer.layerName + \" {\\n\";\n\t\tcss += \"\\tfont-family: \\\"\" + layer.style.fontFamily + \"\\\" ;\\n\";\n        css += \"\\tfont-stretch: \\\"\" + layer.style.fontStretch + \"\\\" ;\\n\";\n        // Refer to this solution on sketch forum https://sketchplugins.com/d/193-how-to-get-font-weight/3 \n\t\tcss += \"\\tfont-weight: \" + utils_obj.appKitWeightToCSSWeight(layer.style.fontWeight, layer.style.fontVariant) + \" ;\\n\";\n\t\tcss += \"\\tfont-style: \" + layer.style.fontStyle + \" ;\\n\";\n\n        if (layer.style.textTransform == \"uppercase\") \n        {\n\t\t\tcss += \"\\ttext-transform: uppercase\" + \";\\n\";\n\t\t}\n\n        if (layer.style.kerning > 0) \n        {\n\t\t\tcss += \"\\tletter-spacing: \" + layer.style.kerning + \";\\n\";\n        }\n\n       \n        if ((layer.style.verticalAlignment != undefined) && (spanLength == 1))\n        {\n            css += \"\\tdisplay: table;\\n\"\n        }\n\n\t\t// If fills only first fill is applied\n        if (layer.style.fills.length > 0) \n        {\n\t\t\tcss += \"\\tcolor: \" + layer.style.fills[0].color + \" ;\\n\";\n        } \n        else \n        {\n\t\t\tcss += \"\\tcolor: \" + layer.style.textColor + \" ;\\n\";\n\t\t}\n\t\tcss += \"\\tfont-size: \" + layer.style.fontSize + \".0px ;\\n\";\n\t\tcss += \"\\tline-height: \" + layer.style.lineHeight + \".0px ;\\n\";\n\t\tcss += \"\\topacity: \" + layer.style.opacity + \" ;\\n\";\n\t\tcss += \"\\ttext-align: \" + layer.style.alignment + \" ;\\n\";\n\t\tcss += \"\\tfont-kerning: \" + layer.style.kerning + \" ;\\n\";\n\t\tcss += getShadowCss(layer.style)\n\t\tcss += getBorderCss(layer.style)\n\t\tcss += \"}\\n\";\n\t\tcss += \"\\n\";\n\n\n        for (var i = 0; i < spanLength; i++) \n        {\n\t\t\tvar spanCss = \"\"\n\t\t\tspanCss += \".sk-asset.sk-\" + layer.layerName + \" .span\" + (i + 1) + \" {\\n\";\n\n\t\t\tvar spanElement = spanArray[i];\n            if (!(spanElement.fontFamilyName === undefined)) \n            {\n\t\t\t\tspanCss += \"\\tfont-family: \\\"\" + spanElement.fontFamilyName + \"\\\" ;\\n\";\n\t\t\t}\n\n            if (!(spanElement.weight === undefined)) \n            {\n\t\t\t\tspanCss += \"\\tfont-weight: \" + spanElement.weight + \" ;\\n\";\n            }\n\n            if ((layer.style.verticalAlignment != undefined) && (spanLength == 1))\n            {\n                spanCss += \"\\tdisplay: table-cell;\\n\"\n                if (layer.style.verticalAlignment == \"top\")\n                    spanCss += \"\\tvertical-align: top;\\n\"\n                else if (layer.style.verticalAlignment == \"center\")\n                    spanCss += \"\\tvertical-align: middle;\\n\"\n                else if (layer.style.verticalAlignment == \"bottom\")\n                    spanCss += \"\\tvertical-align: bottom;\\n\"\n            }\n\n            if (!(spanElement.font_color === undefined)) \n            {\n                if (layer.style.fills.length > 0) \n                {\n\t\t\t\t\tspanCss += \"\\tcolor: \" + layer.style.fills[0].color + \" ;\\n\";\n                } \n                else \n                {\n\t\t\t\t\tspanCss += \"\\tcolor: #\" + spanElement.font_color + \" ;\\n\";\n\t\t\t\t}\n\t\t\t}\n\n            if (!(spanElement.fontSize === undefined)) \n            {\n\t\t\t\tspanCss += \"\\tfont-size: \" + spanElement.fontSize + \".0px ;\\n\";\n\t\t\t}\n\n\t\t\tspanCss += \"}\\n\";\n\t\t\tspanCss += \"\\n\";\n\t\t\tcss += spanCss;\n\n\t\t}\n        return css ;\n        \n    }\n    \n    /**\n     * Generates page level css\n     *\n     * @returns {String} global css for the page\n     */\n    function generateBoilerPlateCSS() \n    {\n        \n        var css = \".sk-ab {\\n\" +\n            \"\\tposition: relative;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"}\\n\";\n\n        css += \"\\n\";\n\n        css += \".sk-asset {\\n\" +\n            \"\\tposition: absolute;\\n\" +\n            \"\\tbackground-repeat: no-repeat;\\n\" +\n            \"}\\n\";\n\n        return css;\n    }\n\n\n    /**\n     * Generates CSS for the artboard div\n     *\n     * @param {*} artboard\n     * @returns {String} css for artboard div\n     */\n    function generateCSSForArtboard(artboard) \n    {\n\n        var css = \".sk-ab.sk-\" + utils_obj.cleanString(artboard.name) + \" {\\n\";\n\n        if (artboard.sketchObject.hasBackgroundColor) \n        {\n            css += \"\\tbackground-color: \" + artboard.background.color + \";\\n\";\n        }\n\n        css += \"\\twidth: \" + Math.round(artboard.frame.width) + \"px;\\n\";\n        css += \"\\theight: \" + Math.round(artboard.frame.height) + \"px;\\n\";\n\n        css += \"}\\n\";\n\n        return css;\n    }\n\n    /**\n     * Run sequence of steps\n     *  1. creates folder for exporting\n     *  2. generates html and css\n     *  3. save text to apt files\n     *  4. export images for layers\n     *\n     * @param {*} folder where the results need to be exported\n     */\n    this.run = function(folder) \n    {\n        exportFolder = folder;\n        selectedArtboards.forEach(function(artboard) \n        {\n\n            var exportPath = exportFolder + utils_obj.cleanString(artboard.name) + \"/\";\n\n            // Delete any previously generated folders\n            fileSystem_obj.deleteFile(exportPath);\n            fileSystem_obj.createFolder(exportPath);\n\n            var htmlPath = exportPath + htmlFileName;\n\n            fileSystem_obj.saveTextToFile(htmlPath, generateHTML(artboard));\n            var cssPath = exportPath + cssFileName ;\n            fileSystem_obj.saveTextToFile(cssPath, generateCSS(artboard));\n            \n            if (!embedSvg) \n            {\n                fileSystem_obj.createFolder(exportPath + imageFolder);\n                exportImages(exportedLayers[artboard], exportPath);\n\n            }\n\n        });\n\n\n    }\n}\n\n\n/**\n * This method uses exported function to perform sketch 2 html export, and is also exposed to other modules for use.\n *\n * @param {*} context sketch context\n * @returns\n */\nfunction exportFullHTML(context) \n{\n\n    sketch.UI.message(\"Genus Plugin processing your artboard \");\n\n    try \n    {\n\n        var exporter = new Exporter(context);\n        var selectedArtboards = exporter.getSelectedArtboards();\n        if (selectedArtboards == undefined || selectedArtboards.length < 1) \n        {\n            var errorMsg = \"Please select the artboards you want to export to HTML.\" \n            var errorMsgTitle = \"Genus Plugin Error: No Artboard Selected\" \n            utils_obj.alertError(errorMsg, errorMsgTitle);\n            return;\n        }\n\n\n        // Use the filesystem class to generate directory path\n        var currentDirectoryPath = fileSystem_obj.getCurrentFilePath();\n        var exportPath = currentDirectoryPath + \"/\";\n\n        exporter.run(exportPath);\n\n        var alertMessage = \"Export finished , Export location: \" + currentDirectoryPath;\n        sketch.UI.message(alertMessage);\n        utils_obj.alert(alertMessage, \"genus\");\n\n    } \n    catch (e) \n    {\n        if (e != nil) \n        { // Nil error means plugin was exited\n            log(e);\n            var msg = \"Oops Something went wrong: You may want to an raise issue on github, Copy paste following message:\\n \"\n            utils_obj.alertError( msg + e );\n        }\n    }\n}\n\n\nexport default exportFullHTML;","import exportFullHTML from './htmlCSSGenerator';\n\nexport default function() \n{\n    exportFullHTML(context);\n}","import sketch from \"sketch\";\n/**\n *Various common utility functions are implemented here\n *\n * @class utils\n */\n\nclass utils \n{\n    constructor(context) \n    {\n        this.context = context;\n    }\n\n    /**\n     * Method to return css weight given numerical weight number returned by sketch api\n     * Refer to this link https://sketchplugins.com/d/193-how-to-get-font-weight/3 \n     * @param {*} weight returned by sketch api\n     * @returns weight in integer\n     */\n    appKitWeightToCSSWeight(weight, fontName) \n    {\n        //console.log(\"weightIndex\", weight)\n        //console.log(\"fontName\", fontName)\n\n        /**   For font name to font weight mapping check links \n         *  https://docs.microsoft.com/en-us/typography/opentype/spec/os2#usweightclass\n         *  https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n         */\n        if(fontName != undefined)\n        {\n            fontName = fontName.toLowerCase();\n            if(fontName.includes(\"thin\") || fontName.includes(\"hairline\"))\n                return 100\n            else if(fontName.includes(\"extra light\") || fontName.includes(\"ultra light\"))\n                return 200\n            else if(fontName.includes(\"light\"))\n                return 300\n            else if(fontName.includes(\"regular\") || fontName.includes(\"normal\"))\n                return 400\n            else if(fontName.includes(\"medium\"))\n                return 500\n            else if(fontName.includes(\"semi bold\") || fontName.includes(\"demi bold\"))\n                return 600\n            else if(fontName.includes(\"bold\") )\n                return 700\n            else if(fontName.includes(\"extra bold\") || fontName.includes(\"ultra bold\"))\n                return 800\n            else if(fontName.includes(\"black\") || fontName.includes(\"heavy\"))\n                return 900\n            else if(fontName.includes(\"extra black\") || fontName.includes(\"ultra black\"))\n                return 950\n        }\n        //console.log(\"weight calculated by this index\")\n        return [100, 100, 100, 200, 300, 400, 500, 500, 600, 700, 800, 900, 900, 900, 900, 900][weight]\n    }\n\n    /**\n     * Method to run arbitrary command line\n     *\n     * @param {*} cmd command that needs to be run \n     * @param {*} path for command \n     * @returns None\n     */\n    runCommand(cmd, path) \n    {\n        /* NSTask.alloc().init(), task.setLaunchPath, task.setArguments and task.launch()\n        * are not part of official sketch javascript api \n        */\n        var task = NSTask.alloc().init()\n        task.setLaunchPath(\"/bin/bash\");\n        task.setArguments(cmd);\n        task.launch();\n    }\n\n    /**\n     * Method to display alert error with sound \n     *\n     * @param {*} msg for error\n     * @param {*} title for error message\n     * @returns None\n     */\n    alertError(msg, title) \n    {\n        title = title || \"Genus Plugin Error:\";\n        this.alert(msg, title);\n        this.runCommand(['-c', 'afplay /System/Library/Sounds/Basso.aiff']);\n    }\n\n    /**\n     * Method to display alert \n     *\n     * @param {*} msg for error\n     * @param {*} title for error message\n     * @returns None\n     */\n    alert(msg, title) \n    {\n        /* NSApplication.sharedApplication and app.displayDialog_withTitle functions\n        * are not part of official sketch javascript api \n        */\n        title = title || \"Genus\";\n        var app = NSApplication.sharedApplication()\n        app.displayDialog_withTitle(msg, title);\n    }\n\n    /**\n     * Convert color to hex string representation of color \n     *\n     * @param {*} color value\n     * @returns string hex value of color \n     */\n    hexColor(color) \n    {\n        console.log(\"color\",color)\n        var r = color.red() * 255;\n        var g = color.green() * 255;\n        var b = color.blue() * 255;\n        return (\"#\" + r.toString(16) + g.toString(16) + b.toString(16)).toUpperCase();\n    }\n\n    /**\n     * Utility function for generating append string for scaled images\n     *\n     * @param {*} scale value\n     * @returns string \n     */\n    nameForScale(scale) \n    {\n        return (scale > 1) ? \"@\" + scale + \"x\" : \"\";\n    }\n\n    /**\n     * Generate string name for layer name with layer name and id so that name \n     * is unique \n     *\n     * @param {*} sketch layer\n     * @returns string \n     */\n    generateLayerName(layer) \n    {\n        const layerExportName = this.cleanString(layer.name) + \"-\" + layer.id\n        return layerExportName;\n    }\n\n    /**\n     * Utility function for removing/replace unwanted chars from string\n     *\n     * @param {*} input string\n     * @returns output cleaned string \n     */\n    cleanString(str) \n    {\n        str = str.replace(/\\//g, \"-\");\n        str = str.replace(/[^\\w\\s]/gi, '');\n        return str.replace(/\\W+/g, \"-\");\n    }\n\n    /**\n     * Checks if there is mask layer in the group\n     *\n     * @param {*} group sketch group\n     * @returns {Boolean} true if mask present and false otherwise\n     */\n    isMaskLayerInGroup(group) \n    {\n        if(group.isMaskLayerInGroup != undefined)\n        {\n            return group.isMaskLayerInGroup\n        }\n        else\n        {\n            var maskPresent = false;\n            var layers = group.layers;\n            var maskLayers = [];\n            for (var i = 0; i < layers.length; i++) {\n                var layer = layers[i];\n                if (layer.sketchObject.isMasked())\n                    maskPresent = true\n    \n            }\n            group.isMaskLayerInGroup = maskPresent ;\n            return  group.isMaskLayerInGroup ;\n\n        }\n    }\n\n}\n\nexport default utils;","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}